{% extends "AdminLayout.html" %}

{% block links %}
<a href="/admindashboard" class="hover:text-red-400 transition">Dashboard</a>
<a href="/AddAuthor" class="hover:text-red-400 transition ml-6">Add Member</a>
<a href="/change-admin-password" class="hover:text-red-400 transition ml-6">Change Password</a>
{% endblock %}

{% block body %}

<script>
function confirmDelete(message) {
    return confirm(message);
}
</script>

<!-- FLASH -->
{% with messages=get_flashed_messages(with_categories=true)%}
{% if messages %}
  {% for category,message in messages %}
    <div class="mb-6 px-6 py-4 rounded shadow-lg
        {% if category=='error' %}
        bg-red-900 border border-red-600 text-red-300
        {% else %}
        bg-green-900 border border-green-600 text-green-300
        {% endif %}">
        {{message}}
    </div>
  {% endfor %}
{% endif %}
{% endwith %}

<h1 class="text-4xl font-bold text-red-500 mb-12 text-center tracking-wide">
  Admin Control Panel
</h1>

<div class="flex gap-8">

  <!-- ================= ARTICLES (WIDER) ================= -->
  <div class="w-2/3">
    <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-2xl p-6">

      <h2 class="text-2xl font-semibold mb-6 text-red-400">Articles</h2>

      <!-- Vertical Scroll Area -->
      <div style="max-height: 500px; overflow-y: auto;">

        <table class="w-full text-left text-gray-300">
          
          <thead class="bg-gradient-to-r from-red-800 to-red-900 text-white uppercase text-sm">
            <tr>
              <th class="px-4 py-3">Title</th>
              <th class="px-4 py-3">Date</th>
              <th class="px-4 py-3">Description</th>
              <th class="px-4 py-3 text-center">Actions</th>
            </tr>
          </thead>

          <tbody class="divide-y divide-gray-800">
            {% for article in articles %}
            <tr class="hover:bg-gray-800 transition">
              <td class="px-4 py-3">{{article.title}}</td>
              <td class="px-4 py-3 text-gray-400">{{article.date_posted}}</td>
              <td class="px-4 py-3 text-gray-400">{{article.description}}</td>
              <td class="px-4 py-3 text-center">
                <a href="/AdminDeleteArticle/{{article.articleid}}"
                   onclick="return confirmDelete('Are you sure you want to delete this article?')"
                   class="bg-red-700 hover:bg-red-600 text-white px-4 py-2 rounded">
                   Delete
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>

        </table>

      </div>

    </div>
  </div>

  <!-- ================= AUTHORS (NARROWER) ================= -->
  <div class="w-1/3">
    <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-2xl p-6">

      <h2 class="text-2xl font-semibold mb-6 text-red-400">Authors</h2>

      <table class="w-full text-left text-gray-300">
        
        <thead class="bg-gradient-to-r from-red-800 to-red-900 text-white uppercase text-sm">
          <tr>
            <th class="px-4 py-3">Author Name</th>
            <th class="px-4 py-3 text-center">Actions</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-800">
          {% for user in users %}
          <tr class="hover:bg-gray-800 transition">
            <td class="px-4 py-3">{{user.name}}</td>
            <td class="px-4 py-3 text-center space-x-2">

              <a href="/EditAuthor"
                 class="bg-yellow-600 hover:bg-yellow-500 text-white px-3 py-2 rounded">
                 Edit
              </a>

              <a href="/DeleteAuthor/{{user.id}}"
                 onclick="return confirmDelete('Are you sure you want to delete this author?')"
                 class="bg-red-700 hover:bg-red-600 text-white px-3 py-2 rounded">
                 Delete
              </a>

            </td>
          </tr>
          {% endfor %}
        </tbody>

      </table>

    </div>
  </div>

</div>

{% endblock %}