{% extends "UserLayout.html" %}

{% block links %}
<a class="hover:text-red-400" href="/">Home</a>
<a class="hover:text-red-400 ml-6" href="/addarticle">Create Mission Log</a>
<a class="hover:text-red-400 ml-6" href="/changepassword">Security Settings</a>
{% endblock %}


{% block body %}

{% with messages=get_flashed_messages(with_categories=true)%}
{% if messages %}
{% for category,message in messages %}

{% if category=='error' %}
<div class="bg-red-900 border border-red-600 text-red-300 px-6 py-4 rounded mb-6 shadow-lg">
    <strong class="font-bold">Mission Failed!</strong>
    <span class="block sm:inline"> {{message}}</span>
</div>
{% else %}
<div class="bg-green-900 border border-green-600 text-green-300 px-6 py-4 rounded mb-6 shadow-lg">
    <strong class="font-bold">Mission Successful!</strong>
    <span class="block sm:inline"> {{message}}</span>
</div>
{% endif %}

{% endfor %}
{% endif %}
{% endwith %}


<div class="container mx-auto px-5 py-16">

  <!-- Welcome Section -->
  <div class="text-center mb-12">
    <h1 class="text-4xl font-bold text-red-500 tracking-wider">
        Welcome, {{user.name}}
    </h1>
    <p class="text-gray-400 mt-3 text-lg">
        Your Heroic Articles
    </p>
  </div>


  <!-- Articles Table -->
  <div class="bg-gray-900 shadow-2xl rounded-lg overflow-hidden border border-gray-800">
    
    <table class="w-full text-left text-gray-300">
      
      <thead class="bg-gradient-to-r from-red-700 to-red-900 text-white uppercase text-sm tracking-wider">
          <tr>
              <th class="px-6 py-4">Article Title</th>
              <th class="px-6 py-4">Date Posted</th>
              <th colspan="2" class="px-6 py-4 text-center">Actions</th>
          </tr>
      </thead>

      <tbody class="divide-y divide-gray-800">

      {% for article in user.articles %}
          <tr class="hover:bg-gray-800 transition duration-200">
              
              <td class="px-6 py-4 font-semibold">
                  {{article.title}}
              </td>

              <td class="px-6 py-4 text-gray-400">
                  {{article.date_posted}}
              </td>

              <td class="px-6 py-4 text-center">
                  <a href="/EditArticle/{{article.articleid}}" 
                     class="bg-yellow-600 hover:bg-yellow-500 text-white px-4 py-1 rounded transition duration-200">
                     Edit
                  </a>
              </td>

              <td class="px-6 py-4 text-center">
                  <a href="/DeleteArticle/{{article.articleid}}" 
                     class="bg-red-700 hover:bg-red-600 text-white px-4 py-1 rounded transition duration-200">
                     Delete
                  </a>
              </td>

          </tr>
      {% endfor %}

      </tbody>

    </table>

  </div>

</div>

{% endblock %}